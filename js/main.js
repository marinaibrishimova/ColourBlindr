var filters=operative({applyAccess:function(f,c,b,a,e){$r1=20;$g1=40;$b1=90;$rgb1=$r1+$g1+$b1;$col=new Array($r1/$rgb1,$b1/$rgb1,$g1/$rgb1);console.log("start loop");var d;for($x=0;$x<b;$x++){for($y=0;$y<c;$y++){if($y===0){d=$x*4}else{if($y===1){d=($x+b)*4}else{d=(($y*b)+$x)*4}}if($x===b-1&&$y===c-1){console.log(d)}$r=f.data[d];$g=f.data[d+1];$b=f.data[d+2];$c2=($r+$g+$b)/3;if(a==1){$newR=$c2;$newG=$r*$col[2]+$g*$col[0]+$b*$col[1];$newB=$b}else{if(a==3){if(($r<45&&$g<60&&$b>50)||($r>200&&$g>200)){$newR=$c2;$newG=$g;$newB=$b}else{$newR=$c2;$newG=$c2;$newB=$b}}else{if(a==2){$newR=$r;$newG=$c2;$newB=$r*$col[0]+$g*$col[1]+$b*$col[2]}else{$newR=$c2;$newG=$c2;$newB=$c2}}}f.data[d]=$newR;f.data[d+1]=$newG;f.data[d+2]=$newB}}console.log("end loop");e(f)}}),imgr,canvas,ctx,imgrData,currData,reader=new FileReader(),fileInput=document.getElementById("fileInput");imgr=document.getElementById("imgr");canvas=document.getElementById("canvas");ctx=canvas.getContext("2d");imgr.onload=function(){drawCanvas()};function drawCanvas(){console.log(imgr.width);canvas.width=imgr.width;canvas.height=imgr.height;ctx.drawImage(imgr,0,0,canvas.width,canvas.height)}function applyFilter(a){showLoading();drawCanvas();imgrData=ctx.getImageData(0,0,canvas.width,canvas.height);filters.applyAccess(imgrData,canvas.height,canvas.width,a,function(b){ctx.putImageData(b,0,0);hideLoading()})}reader.onload=function(a){imgr=document.getElementById("imgr");imgr.src=a.currentTarget.result};reader.onloadend=function(a){hideLoading()};fileInput.onchange=function(d){showLoading();imgr.style.opacity=1;var b=d.target.files[0],c=document.getElementById("logo-wrapper"),a=document.getElementById("controls");reader.readAsDataURL(b),butt={target:document.getElementById("og")};c.classList.add("animated");c.classList.add("fadeOut");c.style.display="none";a.style.height="auto";a.classList.add("animated");a.classList.add("fadeIn");selected(butt)};function rotateCanvas(a){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.save();ctx.translate(canvas.width/2,canvas.height/2);ctx.rotate(a*Math.PI/180);ctx.drawImage(imgr,-imgr.width/2,-imgr.width/2);ctx.restore()}function showFilterText(b){var a=document.getElementById("filterText"+b);a.classList.add("animated");a.classList.add("fadeIn")}function selected(c){var a=document.getElementsByClassName("con-inner"),b;for(b=0;b<a.length;b++){a[b].classList.remove("selected")}if(c){c.target.classList.add("selected")}}function showLoading(){var a=document.getElementById("loader");a.style.display="block"}function hideLoading(){var a=document.getElementById("loader");a.style.display="none"};